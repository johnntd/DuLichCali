<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Du Lịch California</title>
  <link rel="stylesheet" href="./style.css">
  <script async src="https://www.paypal.com/sdk/js?client-id=AYnnJuurmxIuE9uZ8Fe3cmFnqFVElx3G7apdDVkuP7MNlWTmwu2UMJLq2OjldO42UrstA5bhwSeLsRz2"></script>
  <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAhuG4Bg-PBtG2JdnrZYj6ZLb2HXG1RNF4&libraries=places&callback=initMap"></script>
  <script>
    // Bridge for global initMap callback
    window.initMap = function() {
      if (window.app && window.app.initMap) {
        window.app.initMap();
      } else {
        console.error('initMap not found in app module');
      }
    };
  </script>
</head>
<body>
  <div class="container mx-auto p-4">
    <!-- Header -->
    <div class="flex justify-between items-center mb-4">
      <h1 class="text-3xl font-bold">Du Lịch California</h1>
      <div>
        <button id="lang-toggle" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
          Chuyển sang Tiếng Anh
        </button>
      </div>
    </div>

    <!-- Contact Info -->
    <div class="mb-4">
      <p>Duy Hoa, Phone: <a href="tel:714-227-6007">714-227-6007</a>, Email: <a href="mailto:dulichcali21@gmail.com">dulichcali21@gmail.com</a></p>
    </div>

    <!-- Service Selection -->
    <div class="mb-4">
      <label for="service-type" class="block text-lg font-semibold">Chọn Dịch Vụ:</label>
      <select id="service-type" class="w-full p-2 rounded bg-white text-black">
        <option value="travel">Gói Du Lịch</option>
        <option value="airport">Dịch Vụ Sân Bay</option>
      </select>
    </div>

    <!-- Travel Package Form -->
    <div id="travel-form" class="service-form">
      <h2 class="text-2xl font-semibold mb-4">Gói Du Lịch</h2>
      <form id="travel-package-form" action="https://formspree.io/f/xeokgbpo" method="POST">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block">Ngày Đi:</label>
            <input type="date" id="travel-date" name="date" class="w-full p-2 rounded" required>
          </div>
          <div>
            <label class="block">Giờ Đi:</label>
            <input type="time" id="travel-time" name="time" class="w-full p-2 rounded" required>
          </div>
          <div>
            <label class="block">Tên Khách Hàng:</label>
            <input type="text" name="name" class="w-full p-2 rounded" required>
          </div>
          <div>
            <label class="block">Số Điện Thoại:</label>
            <input type="tel" name="phone" class="w-full p-2 rounded" required>
          </div>
          <div>
            <label class="block">Email:</label>
            <input type="email" name="email" class="w-full p-2 rounded" required>
          </div>
          <div>
            <label class="block">Sân Bay:</label>
            <select name="airport" class="w-full p-2 rounded">
              <option value="LAX">LAX</option>
              <option value="SNA">SNA</option>
              <option value="LGB">LGB</option>
            </select>
          </div>
          <div>
            <label class="block">Gói Du Lịch:</label>
            <select id="package-type" name="package" class="w-full p-2 rounded" required>
              <option value="custom">Tùy Chỉnh Điểm Đến</option>
              <option value="disneyland">Disneyland Adventure</option>
              <option value="sandiego">San Diego Family Fun</option>
              <option value="universal">Universal Hollywood</option>
              <option value="national">National Parks Explorer</option>
              <option value="city">City Getaway</option>
            </select>
          </div>
          <div id="destinations-selection">
            <label class="block">Chọn Điểm Đến:</label>
            <select multiple id="destinations" name="destinations" class="w-full p-2 rounded">
              <option value="Disneyland">Disneyland</option>
              <option value="California Adventure">California Adventure</option>
              <option value="Universal Studios">Universal Studios</option>
              <option value="San Diego Zoo">San Diego Zoo</option>
              <option value="SeaWorld">SeaWorld</option>
              <option value="LegoLand">LegoLand</option>
              <option value="Las Vegas">Las Vegas</option>
              <option value="Grand Canyon">Grand Canyon</option>
              <option value="San Francisco">San Francisco</option>
              <option value="Yosemite">Yosemite</option>
              <option value="Lake Tahoe">Lake Tahoe</option>
              <option value="Reno">Reno</option>
              <option value="Silicon Valley">Silicon Valley</option>
            </select>
          </div>
          <div id="ticket-type" class="hidden">
            <label class="block">Loại Vé (Disneyland/Universal):</label>
            <select name="ticket_type" class="w-full p-2 rounded">
              <option value="regular">Regular</option>
              <option value="vip">VIP</option>
              <option value="express">Express</option>
            </select>
          </div>
          <div id="travelers-input">
            <label class="block">Số Người (1–12):</label>
            <input type="number" id="num-travelers" name="num_travelers" min="1" max="12" class="w-full p-2 rounded" required>
          </div>
          <div id="adult-kid-input" class="hidden">
            <label class="block">Số Người Lớn:</label>
            <input type="number" id="num-adults" name="num_adults" min="0" class="w-full p-2 rounded">
            <label class="block">Số Trẻ Em:</label>
            <input type="number" id="num-kids" name="num_kids" min="0" class="w-full p-2 rounded">
          </div>
          <div>
            <label class="block">Số Ngày:</label>
            <input type="number" id="num-days" name="num_days" min="1" class="w-full p-2 rounded" required>
          </div>
          <div>
            <label class="block">Lưu Trú:</label>
            <select id="lodging" name="lodging" class="w-full p-2 rounded" required>
              <option value="none">Không Lưu Trú</option>
              <option value="airbnb">Airbnb</option>
              <option value="hotel">Khách Sạn</option>
            </select>
          </div>
          <div id="dropoff-address" class="hidden">
            <label class="block">Địa Chỉ Đưa Đón:</label>
            <place-autocomplete-element id="dropoff-address-input" name="dropoff_address" class="w-full"></place-autocomplete-element>
          </div>
          <div id="meals-option" class="hidden">
            <label class="block">Bữa Ăn Tự Chọn (Khu vực Vịnh):</label>
            <input type="checkbox" id="meals" name="meals"> $35/ngày/người
          </div>
          <div>
            <label class="block">Đón Sân Bay:</label>
            <input type="checkbox" id="airport-pickup" name="airport_pickup">
            <div id="airport-pickup-details" class="hidden">
              <label class="block">Sân Bay:</label>
              <select name="pickup_airport" class="w-full p-2 rounded">
                <option value="LAX">LAX</option>
                <option value="SNA">SNA</option>
                <option value="LGB">LGB</option>
              </select>
            </div>
          </div>
        </div>
        <div id="cost-estimate" class="mt-4 p-4 bg-white text-black rounded">
          <h3 class="text-lg font-semibold">Ước Tính Chi Phí</h3>
          <p>Phí Vận Chuyển: $<span id="transport-cost">0</span></p>
          <p>Phí Vé: $<span id="admission-cost">0</span></p>
          <p>Phí Bữa Ăn: $<span id="meals-cost">0</span></p>
          <p>Phí Lưu Trú: $<span id="lodging-cost">0</span></p>
          <p>Tổng Cộng: $<span id="total-cost">0</span></p>
        </div>
        <div class="mt-4">
          <button type="submit" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Gửi Yêu Cầu</button>
          <div id="paypal-button-container" class="mt-4"></div>
          <p id="paypal-fallback" class="hidden text-red-500">PayPal hiện không khả dụng. Bạn vẫn có thể gửi yêu cầu và thanh toán sau.</p>
        </div>
      </form>
    </div>

    <!-- Airport Service Form -->
    <div id="airport-form" class="service-form hidden">
      <h2 class="text-2xl font-semibold mb-4">Dịch Vụ Sân Bay</h2>
      <form id="airport-service-form" action="https://formspree.io/f/xeokgbpo" method="POST">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block">Loại Dịch Vụ:</label>
            <select id="airport-service-type" name="service_type" class="w-full p-2 rounded" required>
              <option value="pickup">Đón tại Sân Bay</option>
              <option value="dropoff">Đưa ra Sân Bay</option>
            </select>
          </div>
          <div>
            <label class="block">Sân Bay:</label>
            <select name="airport" class="w-full p-2 rounded" required>
              <option value="LAX">LAX</option>
              <option value="SNA">SNA</option>
              <option value="LGB">LGB</option>
            </select>
          </div>
          <div>
            <label class="block">Địa Chỉ:</label>
            <place-autocomplete-element id="airport-address" name="address" class="w-full" required></place-autocomplete-element>
          </div>
          <div>
            <label class="block">Số Người (1–12):</label>
            <input type="number" name="num_people" min="1" max="12" class="w-full p-2 rounded" required>
          </div>
          <div>
            <label class="block">Ngày:</label>
            <input type="date" name="date" class="w-full p-2 rounded" required>
          </div>
          <div>
            <label class="block">Giờ:</label>
            <input type="time" name="time" class="w-full p-2 rounded" required>
          </div>
          <div>
            <label class="block">Tên Khách Hàng:</label>
            <input type="text" name="name" class="w-full p-2 rounded" required>
          </div>
          <div>
            <label class="block">Số Điện Thoại:</label>
            <input type="tel" name="phone" class="w-full p-2 rounded" required>
          </div>
        </div>
        <div id="airport-cost-estimate" class="mt-4 p-4 bg-white text-black rounded">
          <h3 class="text-lg font-semibold">Ước Tính Chi Phí</h3>
          <p>Phí Vận Chuyển: $<span id="airport-transport-cost">0</span></p>
          <p>Tổng Cộng: $<span id="airport-total-cost">0</span></p>
        </div>
        <div class="mt-4">
          <button type="submit" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Gửi Yêu Cầu</button>
          <button id="pay-later" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">Thanh Toán Sau</button>
        </div>
      </form>
    </div>
  </div>

  <script type="module" src="./script.js"></script>
</body>
</html>
