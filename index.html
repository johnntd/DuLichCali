<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dịch Vụ Du Lịch & Đón Sân Bay California</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <style>
        :root {
            --sunny-yellow: #FFD700;
            --california-orange: #FF8C00;
            --sky-blue: #87CEEB;
            --ocean-blue: #1E90FF;
        }
        
        body {
            background: linear-gradient(135deg, var(--sunny-yellow), var(--california-orange));
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
        }
        
        .container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            padding: 25px;
            margin-top: 30px;
            margin-bottom: 30px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: var(--ocean-blue);
        }
        
        .language-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
        }
        
        .contact-info {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        
        .service-section {
            display: none;
        }
        
        .service-section.active {
            display: block;
        }
        
        .cost-estimate {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            border-left: 5px solid var(--california-orange);
        }
        
        .cost-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .total-cost {
            font-weight: bold;
            border-top: 1px solid #ddd;
            padding-top: 10px;
            margin-top: 10px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                margin-top: 15px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <button id="languageToggle" class="btn btn-secondary language-toggle">English</button>
        
        <div class="header">
            <h1 id="mainTitle">Dịch Vụ Du Lịch & Đón Sân Bay California</h1>
        </div>
        
        <div class="contact-info">
            <p id="contactText">Duy Hoa, Điện thoại: 714-227-6007, Email: <a href="mailto:dulichcali21@gmail.com">dulichcali21@gmail.com</a></p>
        </div>
        
        <div class="mb-4">
            <label for="serviceType" class="form-label" id="serviceTypeLabel">Chọn loại dịch vụ:</label>
            <select class="form-select" id="serviceType">
                <option value="travel" selected id="travelOption">Gói Du Lịch</option>
                <option value="airport" id="airportOption">Dịch Vụ Sân Bay</option>
            </select>
        </div>
        
        <!-- Travel Package Service -->
        <div id="travelService" class="service-section active">
            <form id="travelForm" action="https://formspree.io/f/xeokgbpo" method="POST">
                <input type="hidden" name="service_type" value="travel">
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="package" class="form-label" id="packageLabel">Gói du lịch:</label>
                        <select class="form-select" id="package" name="package">
                            <option value="custom" id="customPackage">Điểm Đến Tùy Chọn</option>
                            <option value="disney" id="disneyPackage">Disneyland Adventure (Disneyland + California Adventure)</option>
                            <option value="san_diego" id="sanDiegoPackage">San Diego Family Fun (San Diego Zoo, SeaWorld, LegoLand)</option>
                            <option value="universal" id="universalPackage">Universal Hollywood (Universal Studios)</option>
                            <option value="parks" id="parksPackage">National Parks Explorer (Grand Canyon, Yosemite)</option>
                            <option value="city" id="cityPackage">City Getaway (Las Vegas, San Francisco, Reno)</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="extraDestinations" class="form-label" id="extraDestinationsLabel">Thêm điểm đến (tùy chọn):</label>
                        <select class="form-select" id="extraDestinations" name="extraDestinations" multiple>
                            <option value="disneyland" id="disneylandOption">Disneyland</option>
                            <option value="california_adventure" id="californiaAdventureOption">California Adventure</option>
                            <option value="universal_studios" id="universalStudiosOption">Universal Studios</option>
                            <option value="san_diego_zoo" id="sanDiegoZooOption">San Diego Zoo</option>
                            <option value="seaworld" id="seaworldOption">SeaWorld</option>
                            <option value="legoland" id="legolandOption">LegoLand</option>
                            <option value="las_vegas" id="lasVegasOption">Las Vegas</option>
                            <option value="grand_canyon" id="grandCanyonOption">Grand Canyon</option>
                            <option value="san_francisco" id="sanFranciscoOption">San Francisco</option>
                            <option value="yosemite" id="yosemiteOption">Yosemite</option>
                            <option value="lake_tahoe" id="lakeTahoeOption">Lake Tahoe</option>
                            <option value="reno" id="renoOption">Reno</option>
                            <option value="silicon_valley" id="siliconValleyOption">Silicon Valley</option>
                        </select>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-4">
                        <label for="travelDate" class="form-label" id="travelDateLabel">Ngày đi:</label>
                        <input type="text" class="form-control datepicker" id="travelDate" name="travelDate" required>
                    </div>
                    <div class="col-md-4">
                        <label for="returnDate" class="form-label" id="returnDateLabel">Ngày về:</label>
                        <input type="text" class="form-control datepicker" id="returnDate" name="returnDate" required>
                    </div>
                    <div class="col-md-4">
                        <label for="travelTime" class="form-label" id="travelTimeLabel">Giờ đón:</label>
                        <input type="time" class="form-control" id="travelTime" name="travelTime" required>
                    </div>
                </div>
                
                <div class="row mb-3" id="themeParkOptions">
                    <div class="col-md-4">
                        <label for="ticketType" class="form-label" id="ticketTypeLabel">Loại vé:</label>
                        <select class="form-select" id="ticketType" name="ticketType">
                            <option value="regular" id="regularTicket">Thường</option>
                            <option value="express" id="expressTicket">Express</option>
                            <option value="vip" id="vipTicket">VIP</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label for="adults" class="form-label" id="adultsLabel">Người lớn:</label>
                        <input type="number" class="form-control" id="adults" name="adults" min="0" value="1">
                    </div>
                    <div class="col-md-4">
                        <label for="kids" class="form-label" id="kidsLabel">Trẻ em (3-9 tuổi):</label>
                        <input type="number" class="form-control" id="kids" name="kids" min="0" value="0">
                    </div>
                </div>
                
                <div class="row mb-3" id="nonThemeParkOptions">
                    <div class="col-md-6">
                        <label for="travelers" class="form-label" id="travelersLabel">Số lượng khách (1-12):</label>
                        <input type="number" class="form-control" id="travelers" name="travelers" min="1" max="12" value="1">
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="lodgingType" class="form-label" id="lodgingTypeLabel">Loại chỗ ở:</label>
                        <select class="form-select" id="lodgingType" name="lodgingType">
                            <option value="none" id="noLodging">Không cần chỗ ở</option>
                            <option value="airbnb" id="airbnbOption">Airbnb</option>
                            <option value="hotel" id="hotelOption">Khách sạn</option>
                        </select>
                    </div>
                    <div class="col-md-6" id="lodgingDetailsSection">
                        <div id="noLodgingDetails">
                            <label for="dropOffAddress" class="form-label" id="dropOffAddressLabel">Địa chỉ trả khách:</label>
                            <input type="text" class="form-control" id="dropOffAddress" name="dropOffAddress">
                        </div>
                    </div>
                </div>
                
                <div class="row mb-3" id="mealOptions">
                    <div class="col-md-12">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="includeMeals" name="includeMeals">
                            <label class="form-check-label" for="includeMeals" id="includeMealsLabel">Bao gồm bữa ăn tự nấu ($35/ngày/người)</label>
                        </div>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="airportPickup" class="form-label" id="airportPickupLabel">Đón từ sân bay (tùy chọn):</label>
                        <select class="form-select" id="airportPickup" name="airportPickup">
                            <option value="none" selected id="noAirportPickup">Không cần đón</option>
                            <option value="LAX" id="laxOption">LAX (Los Angeles)</option>
                            <option value="SNA" id="snaOption">SNA (Orange County)</option>
                            <option value="LGB" id="lgbOption">LGB (Long Beach)</option>
                        </select>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="customerName" class="form-label" id="customerNameLabel">Họ tên:</label>
                        <input type="text" class="form-control" id="customerName" name="customerName" required>
                    </div>
                    <div class="col-md-6">
                        <label for="customerEmail" class="form-label" id="customerEmailLabel">Email:</label>
                        <input type="email" class="form-control" id="customerEmail" name="customerEmail" required>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="customerPhone" class="form-label" id="customerPhoneLabel">Điện thoại:</label>
                        <input type="tel" class="form-control" id="customerPhone" name="customerPhone" required>
                    </div>
                    <div class="col-md-6">
                        <label for="pickupAddress" class="form-label" id="pickupAddressLabel">Địa chỉ đón (nếu khác với địa chỉ đăng ký):</label>
                        <input type="text" class="form-control" id="pickupAddress" name="pickupAddress">
                    </div>
                </div>
                
                <div class="cost-estimate">
                    <h5 id="costEstimateTitle">Ước Tính Chi Phí</h5>
                    <div class="cost-item">
                        <span id="transportationCostLabel">Vận chuyển:</span>
                        <span id="transportationCost">$0</span>
                    </div>
                    <div class="cost-item">
                        <span id="admissionCostLabel">Vé vào cửa:</span>
                        <span id="admissionCost">$0</span>
                    </div>
                    <div class="cost-item">
                        <span id="lodgingCostLabel">Chỗ ở:</span>
                        <span id="lodgingCost">$0</span>
                    </div>
                    <div class="cost-item">
                        <span id="mealsCostLabel">Bữa ăn:</span>
                        <span id="mealsCost">$0</span>
                    </div>
                    <div class="cost-item">
                        <span id="airportPickupCostLabel">Đón sân bay:</span>
                        <span id="airportPickupCost">$0</span>
                    </div>
                    <div class="cost-item total-cost">
                        <span id="totalCostLabel">Tổng cộng:</span>
                        <span id="totalCost">$0</span>
                    </div>
                </div>
                
                <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn btn-primary" id="submitTravelBtn">Gửi Yêu Cầu</button>
                    <div id="paypalButtonContainer" class="mt-2"></div>
                </div>
            </form>
        </div>
        
        <!-- Airport Service -->
        <div id="airportService" class="service-section">
            <form id="airportForm" action="https://formspree.io/f/xeokgbpo" method="POST">
                <input type="hidden" name="service_type" value="airport">
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="serviceDirection" class="form-label" id="serviceDirectionLabel">Loại dịch vụ:</label>
                        <select class="form-select" id="serviceDirection" name="serviceDirection">
                            <option value="pickup" id="pickupOption">Đón từ sân bay</option>
                            <option value="dropoff" id="dropoffOption">Trả tại sân bay</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="airport" class="form-label" id="airportLabel">Sân bay:</label>
                        <select class="form-select" id="airport" name="airport">
                            <option value="LAX" id="laxAirportOption">LAX (Los Angeles)</option>
                            <option value="SNA" selected id="snaAirportOption">SNA (Orange County)</option>
                            <option value="LGB" id="lgbAirportOption">LGB (Long Beach)</option>
                        </select>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="airportDate" class="form-label" id="airportDateLabel">Ngày:</label>
                        <input type="text" class="form-control datepicker" id="airportDate" name="airportDate" required>
                    </div>
                    <div class="col-md-6">
                        <label for="airportTime" class="form-label" id="airportTimeLabel">Giờ:</label>
                        <input type="time" class="form-control" id="airportTime" name="airportTime" required>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="airportPassengers" class="form-label" id="airportPassengersLabel">Số lượng khách (1-12):</label>
                        <input type="number" class="form-control" id="airportPassengers" name="airportPassengers" min="1" max="12" value="1">
                    </div>
                </div>
                
                <div class="row mb-3" id="pickupAddressSection">
                    <div class="col-md-12">
                        <label for="airportAddress" class="form-label" id="airportAddressLabel">Địa chỉ đón:</label>
                        <input type="text" class="form-control" id="airportAddress" name="airportAddress" required>
                    </div>
                </div>
                
                <div class="row mb-3" id="dropoffAddressSection" style="display: none;">
                    <div class="col-md-12">
                        <label for="dropoffAddress" class="form-label" id="dropoffAddressLabel">Địa chỉ trả:</label>
                        <input type="text" class="form-control" id="dropoffAddress" name="dropoffAddress" required>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="airportCustomerName" class="form-label" id="airportCustomerNameLabel">Họ tên:</label>
                        <input type="text" class="form-control" id="airportCustomerName" name="airportCustomerName" required>
                    </div>
                    <div class="col-md-6">
                        <label for="airportCustomerPhone" class="form-label" id="airportCustomerPhoneLabel">Điện thoại:</label>
                        <input type="tel" class="form-control" id="airportCustomerPhone" name="airportCustomerPhone" required>
                    </div>
                </div>
                
                <div class="cost-estimate">
                    <h5 id="airportCostEstimateTitle">Ước Tính Chi Phí</h5>
                    <div class="cost-item">
                        <span id="baseCostLabel">Cước phí cơ bản:</span>
                        <span id="baseCost">$0</span>
                    </div>
                    <div class="cost-item">
                        <span id="mercedesSurchargeLabel">Phụ thu Mercedes:</span>
                        <span id="mercedesSurcharge">$0</span>
                    </div>
                    <div class="cost-item total-cost">
                        <span id="airportTotalCostLabel">Tổng cộng:</span>
                        <span id="airportTotalCost">$0</span>
                    </div>
                </div>
                
                <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn btn-primary" id="submitAirportBtn">Gửi Yêu Cầu</button>
                    <button type="button" class="btn btn-secondary" id="payLaterBtn">Thanh Toán Sau</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/vn.js"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=USD"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAoCDsW6-3UzZI11TMH62uLTE1uP1yX2Ts&libraries=places"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAqedC3BuDKq9zlqfRN6Oamuy_sPE8eN_k",
            authDomain: "dulichcalifornia-b8059.firebaseapp.com",
            projectId: "dulichcalifornia-b8059",
            storageBucket: "dulichcalifornia-b8059.appspot.com",
            messagingSenderId: "925284621075",
            appId: "1:925284621075:web:65e6125a1bed22206dd8e6"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // Language support
        const translations = {
            en: {
                mainTitle: "California Travel & Airport Services",
                contactText: "Duy Hoa, Phone: 714-227-6007, Email: <a href='mailto:dulichcali21@gmail.com'>dulichcali21@gmail.com</a>",
                serviceTypeLabel: "Select service type:",
                travelOption: "Travel Package",
                airportOption: "Airport Service",
                packageLabel: "Package:",
                customPackage: "Custom Destinations",
                disneyPackage: "Disneyland Adventure (Disneyland + California Adventure)",
                sanDiegoPackage: "San Diego Family Fun (San Diego Zoo, SeaWorld, LegoLand)",
                universalPackage: "Universal Hollywood (Universal Studios)",
                parksPackage: "National Parks Explorer (Grand Canyon, Yosemite)",
                cityPackage: "City Getaway (Las Vegas, San Francisco, Reno)",
                extraDestinationsLabel: "Add extra destinations (optional):",
                disneylandOption: "Disneyland",
                californiaAdventureOption: "California Adventure",
                universalStudiosOption: "Universal Studios",
                sanDiegoZooOption: "San Diego Zoo",
                seaworldOption: "SeaWorld",
                legolandOption: "LegoLand",
                lasVegasOption: "Las Vegas",
                grandCanyonOption: "Grand Canyon",
                sanFranciscoOption: "San Francisco",
                yosemiteOption: "Yosemite",
                lakeTahoeOption: "Lake Tahoe",
                renoOption: "Reno",
                siliconValleyOption: "Silicon Valley",
                travelDateLabel: "Departure Date:",
                returnDateLabel: "Return Date:",
                travelTimeLabel: "Pickup Time:",
                ticketTypeLabel: "Ticket Type:",
                regularTicket: "Regular",
                expressTicket: "Express",
                vipTicket: "VIP",
                adultsLabel: "Adults:",
                kidsLabel: "Kids (3-9 years):",
                travelersLabel: "Number of travelers (1-12):",
                lodgingTypeLabel: "Lodging Type:",
                noLodging: "No Lodging",
                airbnbOption: "Airbnb",
                hotelOption: "Hotel",
                dropOffAddressLabel: "Drop-off Address:",
                includeMealsLabel: "Include home-cooked meals ($35/day/person)",
                airportPickupLabel: "Airport Pickup (optional):",
                noAirportPickup: "Not needed",
                laxOption: "LAX (Los Angeles)",
                snaOption: "SNA (Orange County)",
                lgbOption: "LGB (Long Beach)",
                customerNameLabel: "Full Name:",
                customerEmailLabel: "Email:",
                customerPhoneLabel: "Phone:",
                pickupAddressLabel: "Pickup Address (if different from registered address):",
                costEstimateTitle: "Cost Estimate",
                transportationCostLabel: "Transportation:",
                admissionCostLabel: "Admission Tickets:",
                lodgingCostLabel: "Lodging:",
                mealsCostLabel: "Meals:",
                airportPickupCostLabel: "Airport Pickup:",
                totalCostLabel: "Total:",
                submitTravelBtn: "Submit Request",
                serviceDirectionLabel: "Service Type:",
                pickupOption: "Pickup from Airport",
                dropoffOption: "Dropoff at Airport",
                airportLabel: "Airport:",
                laxAirportOption: "LAX (Los Angeles)",
                snaAirportOption: "SNA (Orange County)",
                lgbAirportOption: "LGB (Long Beach)",
                airportDateLabel: "Date:",
                airportTimeLabel: "Time:",
                airportPassengersLabel: "Number of passengers (1-12):",
                airportAddressLabel: "Pickup Address:",
                dropoffAddressLabel: "Dropoff Address:",
                airportCustomerNameLabel: "Full Name:",
                airportCustomerPhoneLabel: "Phone:",
                airportCostEstimateTitle: "Cost Estimate",
                baseCostLabel: "Base Cost:",
                mercedesSurchargeLabel: "Mercedes Surcharge:",
                airportTotalCostLabel: "Total:",
                submitAirportBtn: "Submit Request",
                payLaterBtn: "Pay Later"
            },
            vi: {
                mainTitle: "Dịch Vụ Du Lịch & Đón Sân Bay California",
                contactText: "Duy Hoa, Điện thoại: 714-227-6007, Email: <a href='mailto:dulichcali21@gmail.com'>dulichcali21@gmail.com</a>",
                serviceTypeLabel: "Chọn loại dịch vụ:",
                travelOption: "Gói Du Lịch",
                airportOption: "Dịch Vụ Sân Bay",
                packageLabel: "Gói du lịch:",
                customPackage: "Điểm Đến Tùy Chọn",
                disneyPackage: "Disneyland Adventure (Disneyland + California Adventure)",
                sanDiegoPackage: "San Diego Family Fun (San Diego Zoo, SeaWorld, LegoLand)",
                universalPackage: "Universal Hollywood (Universal Studios)",
                parksPackage: "National Parks Explorer (Grand Canyon, Yosemite)",
                cityPackage: "City Getaway (Las Vegas, San Francisco, Reno)",
                extraDestinationsLabel: "Thêm điểm đến (tùy chọn):",
                disneylandOption: "Disneyland",
                californiaAdventureOption: "California Adventure",
                universalStudiosOption: "Universal Studios",
                sanDiegoZooOption: "San Diego Zoo",
                seaworldOption: "SeaWorld",
                legolandOption: "LegoLand",
                lasVegasOption: "Las Vegas",
                grandCanyonOption: "Grand Canyon",
                sanFranciscoOption: "San Francisco",
                yosemiteOption: "Yosemite",
                lakeTahoeOption: "Lake Tahoe",
                renoOption: "Reno",
                siliconValleyOption: "Silicon Valley",
                travelDateLabel: "Ngày đi:",
                returnDateLabel: "Ngày về:",
                travelTimeLabel: "Giờ đón:",
                ticketTypeLabel: "Loại vé:",
                regularTicket: "Thường",
                expressTicket: "Express",
                vipTicket: "VIP",
                adultsLabel: "Người lớn:",
                kidsLabel: "Trẻ em (3-9 tuổi):",
                travelersLabel: "Số lượng khách (1-12):",
                lodgingTypeLabel: "Loại chỗ ở:",
                noLodging: "Không cần chỗ ở",
                airbnbOption: "Airbnb",
                hotelOption: "Khách sạn",
                dropOffAddressLabel: "Địa chỉ trả khách:",
                includeMealsLabel: "Bao gồm bữa ăn tự nấu ($35/ngày/người)",
                airportPickupLabel: "Đón từ sân bay (tùy chọn):",
                noAirportPickup: "Không cần đón",
                laxOption: "LAX (Los Angeles)",
                snaOption: "SNA (Orange County)",
                lgbOption: "LGB (Long Beach)",
                customerNameLabel: "Họ tên:",
                customerEmailLabel: "Email:",
                customerPhoneLabel: "Điện thoại:",
                pickupAddressLabel: "Địa chỉ đón (nếu khác với địa chỉ đăng ký):",
                costEstimateTitle: "Ước Tính Chi Phí",
                transportationCostLabel: "Vận chuyển:",
                admissionCostLabel: "Vé vào cửa:",
                lodgingCostLabel: "Chỗ ở:",
                mealsCostLabel: "Bữa ăn:",
                airportPickupCostLabel: "Đón sân bay:",
                totalCostLabel: "Tổng cộng:",
                submitTravelBtn: "Gửi Yêu Cầu",
                serviceDirectionLabel: "Loại dịch vụ:",
                pickupOption: "Đón từ sân bay",
                dropoffOption: "Trả tại sân bay",
                airportLabel: "Sân bay:",
                laxAirportOption: "LAX (Los Angeles)",
                snaAirportOption: "SNA (Orange County)",
                lgbAirportOption: "LGB (Long Beach)",
                airportDateLabel: "Ngày:",
                airportTimeLabel: "Giờ:",
                airportPassengersLabel: "Số lượng khách (1-12):",
                airportAddressLabel: "Địa chỉ đón:",
                dropoffAddressLabel: "Địa chỉ trả:",
                airportCustomerNameLabel: "Họ tên:",
                airportCustomerPhoneLabel: "Điện thoại:",
                airportCostEstimateTitle: "Ước Tính Chi Phí",
                baseCostLabel: "Cước phí cơ bản:",
                mercedesSurchargeLabel: "Phụ thu Mercedes:",
                airportTotalCostLabel: "Tổng cộng:",
                submitAirportBtn: "Gửi Yêu Cầu",
                payLaterBtn: "Thanh Toán Sau"
            }
        };
        
        // Current language (default to Vietnamese)
        let currentLanguage = 'vi';
        
        // Admission fees
        const admissionFees = {
            disneyland: { regular: { adult: 150, kid: 100 }, express: { adult: 200, kid: 150 }, vip: { adult: 300, kid: 200 } },
            california_adventure: { regular: { adult: 150, kid: 100 }, express: { adult: 200, kid: 150 }, vip: { adult: 300, kid: 200 } },
            universal_studios: { regular: { adult: 120, kid: 80 }, express: { adult: 180, kid: 130 }, vip: { adult: 250, kid: 180 } },
            san_diego_zoo: 70,
            seaworld: 90,
            legoland: 100,
            las_vegas: 0,
            grand_canyon: 25,
            san_francisco: 0,
            yosemite: 20,
            lake_tahoe: 0,
            reno: 0,
            silicon_valley: 20
        };
        
        // Distances from Orange County (round trip)
        const destinationDistances = {
            disneyland: 60,
            california_adventure: 60,
            universal_studios: 100,
            san_diego_zoo: 190,
            seaworld: 190,
            legoland: 140,
            las_vegas: 540,
            grand_canyon: 960,
            san_francisco: 860,
            yosemite: 700,
            lake_tahoe: 960,
            reno: 1000,
            silicon_valley: 760
        };
        
        // Lodging cost estimates (per night)
        const lodgingCosts = {
            disneyland: { hotel: 150, airbnb: 120 },
            universal_studios: { hotel: 130, airbnb: 100 },
            san_diego: { hotel: 140, airbnb: 110 },
            las_vegas: { hotel: 100, airbnb: 80 },
            grand_canyon: { hotel: 120, airbnb: 90 },
            san_francisco: { hotel: 200, airbnb: 150 },
            yosemite: { hotel: 110, airbnb: 85 },
            lake_tahoe: { hotel: 180, airbnb: 140 },
            reno: { hotel: 90, airbnb: 70 },
            silicon_valley: { hotel: 190, airbnb: 145 }
        };
        
        // Airport base costs
        const airportBaseCosts = {
            LAX: { orangeCounty: 100, longBeach: 80, losAngeles: 100, other: 150 },
            SNA: { orangeCounty: 50, longBeach: 80, losAngeles: 100, other: 150 },
            LGB: { orangeCounty: 50, longBeach: 80, losAngeles: 100, other: 150 }
        };
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize date pickers
            flatpickr(".datepicker", {
                locale: "vn",
                minDate: "today",
                disable: [], // Will be populated with booked dates
                dateFormat: "d/m/Y"
            });
            
            // Load booked dates from Firebase
            loadBookedDates();
            
            // Set up service type toggle
            document.getElementById('serviceType').addEventListener('change', function() {
                document.getElementById('travelService').classList.toggle('active', this.value === 'travel');
                document.getElementById('airportService').classList.toggle('active', this.value === 'airport');
            });
            
            // Set up language toggle
            document.getElementById('languageToggle').addEventListener('click', function() {
                currentLanguage = currentLanguage === 'en' ? 'vi' : 'en';
                this.textContent = currentLanguage === 'en' ? 'Tiếng Việt' : 'English';
                translatePage();
            });
            
            // Set up package type change for travel service
            document.getElementById('package').addEventListener('change', function() {
                updatePackageOptions();
                calculateCost();
            });
            
            // Set up extra destinations change
            document.getElementById('extraDestinations').addEventListener('change', function() {
                calculateCost();
            });
            
            // Set up lodging type change
            document.getElementById('lodgingType').addEventListener('change', function() {
                updateLodgingDetails();
                calculateCost();
            });
            
            // Set up service direction change for airport service
            document.getElementById('serviceDirection').addEventListener('change', function() {
                updateAirportServiceFields();
                calculateAirportCost();
            });
            
            // Set up all event listeners for cost calculation
            setupCostCalculationListeners();
            
            // Initialize Google Places Autocomplete
            initAutocomplete();
            
            // Initialize PayPal button
            initPayPalButton();
        });
        
        // Load booked dates from Firebase
        function loadBookedDates() {
            const bookingsRef = database.ref('bookings');
            bookingsRef.once('value').then((snapshot) => {
                const bookedDates = [];
                snapshot.forEach((childSnapshot) => {
                    const booking = childSnapshot.val();
                    if (booking.travelDate) {
                        bookedDates.push(booking.travelDate);
                    }
                    if (booking.returnDate) {
                        bookedDates.push(booking.returnDate);
                    }
                    if (booking.airportDate) {
                        bookedDates.push(booking.airportDate);
                    }
                });
                
                // Update date pickers with disabled dates
                const datepickers = document.querySelectorAll('.datepicker');
                datepickers.forEach((picker) => {
                    picker._flatpickr.set('disable', bookedDates);
                });
            });
        }
        
        // Translate the entire page
        function translatePage() {
            const elements = document.querySelectorAll('[id]');
            elements.forEach(element => {
                const translation = translations[currentLanguage][element.id];
                if (translation) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translation;
                    } else if (element.tagName === 'OPTION') {
                        element.textContent = translation;
                    } else {
                        element.innerHTML = translation;
                    }
                }
            });
            
            // Update date picker locale
            const datepickers = document.querySelectorAll('.datepicker');
            datepickers.forEach((picker) => {
                picker._flatpickr.set('locale', currentLanguage === 'en' ? 'default' : 'vn');
            });
        }
        
        // Update package options based on selection
        function updatePackageOptions() {
            const package = document.getElementById('package').value;
            const themeParkOptions = document.getElementById('themeParkOptions');
            const nonThemeParkOptions = document.getElementById('nonThemeParkOptions');
            const mealOptions = document.getElementById('mealOptions');
            
            // Show/hide theme park options
            if (package === 'disney' || package === 'universal') {
                themeParkOptions.style.display = 'flex';
                nonThemeParkOptions.style.display = 'none';
                document.getElementById('ticketType').style.display = 'block';
            } else {
                themeParkOptions.style.display = 'none';
                nonThemeParkOptions.style.display = 'flex';
                document.getElementById('ticketType').style.display = 'none';
            }
            
            // Show/hide meal options (only for Bay Area)
            mealOptions.style.display = (package === 'city') ? 'block' : 'none';
            
            // Auto-select destinations based on package
            const extraDestinations = document.getElementById('extraDestinations');
            Array.from(extraDestinations.options).forEach(option => {
                option.selected = false;
            });
            
            switch(package) {
                case 'disney':
                    document.getElementById('disneyland').selected = true;
                    document.getElementById('california_adventure').selected = true;
                    break;
                case 'san_diego':
                    document.getElementById('san_diego_zoo').selected = true;
                    document.getElementById('seaworld').selected = true;
                    document.getElementById('legoland').selected = true;
                    break;
                case 'universal':
                    document.getElementById('universal_studios').selected = true;
                    break;
                case 'parks':
                    document.getElementById('grand_canyon').selected = true;
                    document.getElementById('yosemite').selected = true;
                    break;
                case 'city':
                    document.getElementById('las_vegas').selected = true;
                    document.getElementById('san_francisco').selected = true;
                    document.getElementById('reno').selected = true;
                    break;
            }
        }
        
        // Update lodging details based on selection
        function updateLodgingDetails() {
            const lodgingType = document.getElementById('lodgingType').value;
            const lodgingDetailsSection = document.getElementById('lodgingDetailsSection');
            
            // Clear previous details
            lodgingDetailsSection.innerHTML = '';
            
            if (lodgingType === 'none') {
                const noLodgingDiv = document.createElement('div');
                noLodgingDiv.id = 'noLodgingDetails';
                noLodgingDiv.innerHTML = `
                    <label for="dropOffAddress" class="form-label" id="dropOffAddressLabel">${translations[currentLanguage].dropOffAddressLabel}</label>
                    <input type="text" class="form-control" id="dropOffAddress" name="dropOffAddress">
                `;
                lodgingDetailsSection.appendChild(noLodgingDiv);
            } else if (lodgingType === 'airbnb' || lodgingType === 'hotel') {
                // No additional fields needed for Airbnb/Hotel
            }
        }
        
        // Update airport service fields based on direction
        function updateAirportServiceFields() {
            const direction = document.getElementById('serviceDirection').value;
            const pickupSection = document.getElementById('pickupAddressSection');
            const dropoffSection = document.getElementById('dropoffAddressSection');
            
            if (direction === 'pickup') {
                pickupSection.style.display = 'block';
                dropoffSection.style.display = 'none';
                document.getElementById('airportAddressLabel').textContent = translations[currentLanguage].airportAddressLabel;
            } else {
                pickupSection.style.display = 'none';
                dropoffSection.style.display = 'block';
                document.getElementById('dropoffAddressLabel').textContent = translations[currentLanguage].dropoffAddressLabel;
            }
        }
        
        // Set up all event listeners for cost calculation
        function setupCostCalculationListeners() {
            // Travel service listeners
            const travelInputs = [
                'package', 'extraDestinations', 'travelDate', 'returnDate', 'travelTime',
                'ticketType', 'adults', 'kids', 'travelers', 'lodgingType', 'dropOffAddress',
                'includeMeals', 'airportPickup', 'customerName', 'customerEmail',
                'customerPhone', 'pickupAddress'
            ];
            
            travelInputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('change', calculateCost);
                    element.addEventListener('input', calculateCost);
                }
            });
            
            // Airport service listeners
            const airportInputs = [
                'serviceDirection', 'airport', 'airportDate', 'airportTime',
                'airportPassengers', 'airportAddress', 'dropoffAddress',
                'airportCustomerName', 'airportCustomerPhone'
            ];
            
            airportInputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('change', calculateAirportCost);
                    element.addEventListener('input', calculateAirportCost);
                }
            });
        }
        
        // Initialize Google Places Autocomplete
        function initAutocomplete() {
            const addressFields = [
                'dropOffAddress', 'pickupAddress', 'airportAddress', 'dropoffAddress'
            ];
            
            addressFields.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    const autocomplete = new google.maps.places.Autocomplete(input, {
                        types: ['address'],
                        componentRestrictions: { country: 'us' }
                    });
                    
                    autocomplete.addListener('place_changed', function() {
                        if (id === 'pickupAddress' || id === 'airportAddress' || id === 'dropoffAddress') {
                            calculateCost();
                        }
                    });
                }
            });
        }
        
        // Initialize PayPal button
        function initPayPalButton() {
            paypal.Buttons({
                createOrder: function(data, actions) {
                    // Calculate the total cost
                    const totalCost = parseFloat(document.getElementById('totalCost').textContent.replace('$', ''));
                    
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: totalCost.toFixed(2),
                                currency_code: 'USD'
                            },
                            payee: {
                                email_address: 'johnntd21@icloud.com'
                            }
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        // Submit the form after successful payment
                        document.getElementById('travelForm').submit();
                    });
                },
                onError: function(err) {
                    console.error('PayPal error:', err);
                    alert('There was an error processing your PayPal payment. Please try again.');
                }
            }).render('#paypalButtonContainer');
        }
        
        // Calculate cost for travel service
       function calculateCost() {
    // Get package and destinations
    const package = document.getElementById('package').value;
    const extraDestinations = Array.from(document.getElementById('extraDestinations').selectedOptions)
        .map(option => option.value);
    
    // Get dates
    const travelDate = document.getElementById('travelDate').value;
    const returnDate = document.getElementById('returnDate').value;
    
    // Calculate number of days
    let days = 1;
    if (travelDate && returnDate) {
        const startDate = new Date(travelDate);
        const endDate = new Date(returnDate);
        days = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
    }
    
    // Get number of travelers
    let travelers;
    if (package === 'disney' || package === 'universal') {
        const adults = parseInt(document.getElementById('adults').value) || 0;
        const kids = parseInt(document.getElementById('kids').value) || 0;
        travelers = adults + kids;
        document.getElementById('travelers').value = travelers;
    } else {
        travelers = parseInt(document.getElementById('travelers').value) || 1;
    }
    
    // Calculate transportation cost - FIXED
    let transportationCost = 0;
    let maxDistance = 0;
    
    // Special handling for package destinations
    switch(package) {
        case 'disney':
            maxDistance = 60; // Disneyland round trip distance
            break;
        case 'san_diego':
            maxDistance = 190; // San Diego Zoo round trip distance
            break;
        case 'universal':
            maxDistance = 100; // Universal Studios round trip distance
            break;
        case 'parks':
            maxDistance = 960; // Grand Canyon round trip distance
            break;
        case 'city':
            maxDistance = 860; // San Francisco round trip distance
            break;
        default:
            // For custom packages, find max distance from extra destinations
            extraDestinations.forEach(dest => {
                const distance = destinationDistances[dest] || 0;
                if (distance > maxDistance) maxDistance = distance;
            });
    }
    
    // Calculate base transportation cost
    if (maxDistance > 0) {
        transportationCost = maxDistance * 2.5 * days;
    }
    
    // Apply Mercedes surcharge if more than 3 travelers
    let mercedesSurcharge = 0;
    if (travelers > 3) {
        mercedesSurcharge = 30 * days;
        transportationCost = transportationCost * 1.2; // 20% surcharge
    }
    transportationCost += mercedesSurcharge;
    
    // Calculate admission fees - FIXED (was correct)
    let admissionCost = 0;
    
    if (package === 'disney' || package === 'universal') {
        const adults = parseInt(document.getElementById('adults').value) || 0;
        const kids = parseInt(document.getElementById('kids').value) || 0;
        const ticketType = document.getElementById('ticketType').value;
        
        // Handle Disney/California Adventure packages
        if (package === 'disney') {
            admissionCost += adults * admissionFees.disneyland[ticketType].adult * 2; // 2 parks
            admissionCost += kids * admissionFees.disneyland[ticketType].kid * 2; // 2 parks
        } 
        // Handle Universal package
        else if (package === 'universal') {
            admissionCost += adults * admissionFees.universal_studios[ticketType].adult;
            admissionCost += kids * admissionFees.universal_studios[ticketType].kid;
        }
    } else {
        // Non-theme park destinations
        let destinations = [];
        switch(package) {
            case 'san_diego':
                destinations = ['san_diego_zoo', 'seaworld', 'legoland'];
                break;
            case 'parks':
                destinations = ['grand_canyon', 'yosemite'];
                break;
            case 'city':
                destinations = ['las_vegas', 'san_francisco', 'reno'];
                break;
            default:
                destinations = extraDestinations;
        }
        
        destinations.forEach(dest => {
            if (admissionFees[dest] && typeof admissionFees[dest] === 'number') {
                admissionCost += travelers * admissionFees[dest];
            }
        });
    }
    
    // Calculate lodging cost - FIXED
    let lodgingCost = 0;
    const lodgingType = document.getElementById('lodgingType').value;
    
    if (lodgingType !== 'none' && days > 1) {
        const nights = days - 1;
        let rate = 150; // Default hotel rate
        
        // Adjust rate based on destination
        if (package === 'disney') {
            rate = 150; // Disneyland area hotels
        } else if (package === 'universal') {
            rate = 130; // Universal Studios area hotels
        } else if (package === 'san_diego') {
            rate = 140; // San Diego hotels
        }
        // Other packages use default rate
        
        if (lodgingType === 'hotel') {
            const roomsNeeded = travelers > 5 ? 2 : 1;
            lodgingCost = roomsNeeded * rate * nights;
        } else if (lodgingType === 'airbnb') {
            const multiplier = Math.ceil(travelers / 4);
            lodgingCost = multiplier * (rate * 0.8) * nights; // Airbnb is 80% of hotel rate
        }
    }
    
    // Calculate meals cost
    let mealsCost = 0;
    const includeMeals = document.getElementById('includeMeals').checked;
    
    if (includeMeals && package === 'city') {
        mealsCost = travelers * 35 * days;
    }
    
    // Calculate airport pickup cost - FIXED (was correct)
    let airportPickupCost = 0;
    const airportPickup = document.getElementById('airportPickup').value;
    const airportPassengers = travelers;
    
    if (airportPickup !== 'none') {
        // Base cost based on airport
        let baseCost;
        switch(airportPickup) {
            case 'LAX':
                baseCost = 100;
                break;
            case 'SNA':
                baseCost = 50;
                break;
            case 'LGB':
                baseCost = 80;
                break;
            default:
                baseCost = 150;
        }
        
        // Apply surcharge for larger groups
        if (airportPassengers > 3) {
            airportPickupCost = (baseCost * 1.2) + 30;
        } else {
            airportPickupCost = baseCost;
        }
    }
    
    // Calculate total cost
    const totalCost = transportationCost + admissionCost + lodgingCost + mealsCost + airportPickupCost;
    
    // Update the cost display
    document.getElementById('transportationCost').textContent = `$${transportationCost.toFixed(2)}`;
    document.getElementById('admissionCost').textContent = `$${admissionCost.toFixed(2)}`;
    document.getElementById('lodgingCost').textContent = `$${lodgingCost.toFixed(2)}`;
    document.getElementById('mealsCost').textContent = `$${mealsCost.toFixed(2)}`;
    document.getElementById('airportPickupCost').textContent = `$${airportPickupCost.toFixed(2)}`;
    document.getElementById('totalCost').textContent = `$${totalCost.toFixed(2)}`;
}        
        // Calculate cost for airport service
        function calculateAirportCost() {
            const airport = document.getElementById('airport').value;
            const passengers = parseInt(document.getElementById('airportPassengers').value) || 1;
            const address = document.getElementById('serviceDirection').value === 'pickup' 
                ? document.getElementById('airportAddress').value 
                : document.getElementById('dropoffAddress').value;
            
            // Base cost logic
            let baseCost;
            if (passengers <= 3) {
                // Small group base costs
                if (address.match(/^(926|927|928)\d{2}/)) {
                    // Orange County ZIP codes
                    baseCost = 50;
                } else if (address.match(/^908\d{2}/)) {
                    // Long Beach ZIP code
                    baseCost = 80;
                } else if (address.match(/^90\d{3}/)) {
                    // Los Angeles ZIP codes
                    baseCost = 100;
                } else {
                    // Other areas
                    baseCost = 150;
                }
            } else {
                // Large group - calculate based on distance (simplified for this example)
                // In a real app, you'd use the Google Maps API to calculate distance
                baseCost = 150; // Default for large groups
                
                // Apply Mercedes surcharge
                baseCost = baseCost * 1.2 + 30;
            }
            
            // Update the cost display
            document.getElementById('baseCost').textContent = `$${baseCost.toFixed(2)}`;
            
            let mercedesSurcharge = 0;
            if (passengers > 3) {
                mercedesSurcharge = 30 + (baseCost * 0.2);
                document.getElementById('mercedesSurcharge').textContent = `$${mercedesSurcharge.toFixed(2)}`;
            } else {
                document.getElementById('mercedesSurcharge').textContent = '$0';
            }
            
            const totalCost = baseCost + mercedesSurcharge;
            document.getElementById('airportTotalCost').textContent = `$${totalCost.toFixed(2)}`;
        }
    </script>
</body>
</html>
